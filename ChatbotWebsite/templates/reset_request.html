{%extends "layout.html"%} {%block content%}
<div class="container-sm px-5">
  <form method="POST" action="">
    {{form.hidden_tag()}}
    <fieldset class="form-group d-grid gap-3">
      <legend
        class="fs-1 fw-bold font-monospace border-bottom border-info mb-3 mt-2"
      >
        Reset Password
      </legend>
      <div class="form-group">
        {{form.email.label(class="form-control-label")}} {%if
        form.email.errors%} {{form.email(class="form-control form-control-lg
        is-invalid")}} {%for error in form.email.errors%}
        <div class="invalid-feedback">{{error}}</div>
        {%endfor%} {%else%} {{form.email(class="form-control form-control-lg")}}
        {%endif%}
      </div>
    </fieldset>
    <div class="form-group">
      {{form.submit(class="btn btn-outline-info btn-lg mt-3 mb-1")}}
    </div>
  </form>

  {% if reset_link %}
  <div class="alert alert-info mt-4" role="alert">
    <h5 class="alert-heading">ðŸ”— Password Reset Link (Development Mode)</h5>
    <p class="mb-2"><strong>Email:</strong> {{ user_email }}</p>
    <hr>
    <p class="mb-2"><strong>Click the link below to reset your password:</strong></p>
    <div class="mb-3">
      <a href="{{ reset_link }}" class="btn btn-primary btn-lg" target="_blank">
        Reset My Password
      </a>
    </div>
    <p class="mb-0 small text-muted">
      <strong>Or copy this link:</strong><br>
      <code style="word-break: break-all; font-size: 0.85rem;">{{ reset_link }}</code>
    </p>
    <hr>
    <p class="mb-0 small"><em>Note: In development mode, the reset link is shown here instead of being sent via email.</em></p>
  </div>
  {% endif %}
</div>
{% endblock content%}